
R version 3.3.2 (2016-10-31) -- "Sincere Pumpkin Patch"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin13.4.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(daff)
> set.seed(42)
> 
> df.orig <- data.frame(letters=letters,
+                      ints=1:26,
+                      doubles=(1:26)+0.5,
+                      factors=factor(LETTERS),
+                      LETTERS=LETTERS,
+                      lL=paste (letters, LETTERS),
+                      stringsAsFactors = FALSE,
+                      unchanged=paste0(letters, LETTERS)
+                      )
> df.ref <- df.orig
> df     <- df.orig
> 
> df$letters <- as.character(df$letters)
> df[ 3, "letters"] <- NA
> df[ 4, "letters"] <- ""
> df[ 5, "letters"] <- LETTERS[5]
> df[ 6, "letters"] <- paste0(letters[6], letters[7])
> 
> # df[ 8, "ints"   ] <- NA
> # df[ 9, "ints"   ] <- 0
> # df[10, "ints"   ] <- -1
> 
> df[13, "doubles"] <- NA
> df[14, "doubles"] <- 0.1
> df[15, "doubles"] <- -1.1
> 
> df[18, "factors"] <- NA
> df[19, "factors"] <- LETTERS[26]
> 
> levels(df$factors) <- c(levels(df$factors), letters, "")
> df[20, "factors"] <- letters[20]
> df[21, "factors"] <- ""
> 
> #df$lL[6:10]  <- gsub("^\\s*",   "",           df.ref$lL[ 6:10])
> df$lL[11:15] <- paste0(" ",   df.ref$lL[11:15]     )
> df$lL[16:20] <- paste0(       df.ref$lL[16:20], " ")
> df$lL[21:26] <- paste0(" ",   df.ref$lL[21:26], " ")
> df.changed <- df
> 
> 
> ### test
> 
> # test some diff flags
> do <- function(x=df.ref, y=df, ..., print=!interactive(), render=interactive())
+ {
+   diff <- diff_data(df.ref, df, ...)
+   if(print )  print(diff)
+   if(render)  render_diff(diff)
+   invisible(diff)
+ }
> 
> # data changes
> df <- df.changed
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> # permute rows!
> df <- df.orig[sample(nrow(df)),]
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
        0   1       2    3   4
1     @:@         0:0  1:1 ...
2          @@ letters ints ...
3    24:1   :       x   24 ...
4    26:2   :       z   26 ...
5     7:3           g    7 ...
6    20:4   :       t   20 ...
...   ... ...     ...  ... ...
23  17:21           q   17 ...
24   1:22   :       a    1 ...
25  25:23           y   25 ...
26  19:24   :       s   19 ...
27   5:25   :       e    5 ...
28   9:26   :       i    9 ...

> 
> # permute cols!
> df <- df.orig[, sample(ncol(df))]
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0   1       2
1   @:@         2:0
2         !        
3        @@ doubles
... ... ...     ...
11  @:@         2:0
21        !        
31       @@ doubles

> 
> # add a row
> df <- rbind(df.orig, df.orig[14,])
> df[nrow(df), "ints"] <- 75
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3
1    @@ letters ints doubles
2   ...     ...  ...     ...
3             z   26    26.5
4   +++       n   75    14.5
... ...     ...  ...     ...
11   @@ letters ints doubles
21  ...     ...  ...     ...
31            z   26    26.5
41  +++       n   75    14.5

> 
> # remove a row
> df <- df.orig[-21, ]
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5
1    @@ letters ints doubles factors LETTERS
2   ...     ...  ...     ...     ...     ...
3             t   20    20.5       T       T
4   ---       u   21    21.5       U       U
5             v   22    22.5       V       V
6   ...     ...  ...     ...     ...     ...
... ...     ...  ...     ...     ...     ...
11   @@ letters ints doubles factors LETTERS
21  ...     ...  ...     ...     ...     ...
31            t   20    20.5       T       T
41  ---       u   21    21.5       U       U
51            v   22    22.5       V       V
61  ...     ...  ...     ...     ...     ...

> 
> # add a column
> df <- cbind(df.orig, addded=1:nrow(df.orig))
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2   3         4      5
1     !              ...              +++
2    @@ letters ints ... unchanged addded
3     +       a    1 ...        aA      1
4     +       b    2 ...        bB      2
5     +       c    3 ...        cC      3
6     +       d    4 ...        dD      4
... ...     ...  ... ...       ...    ...
23    +       u   21 ...        uU     21
24    +       v   22 ...        vV     22
25    +       w   23 ...        wW     23
26    +       x   24 ...        xX     24
27    +       y   25 ...        yY     25
28    +       z   26 ...        zZ     26

> 
> # remove a column
> df <- df.orig[, -3]
> do(df.ref, df)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1
1     !        
2    @@ letters
... ...     ...
11    !        
21   @@ letters

> 
> df <- df.changed
> # cute use of binary operator!
> "%~%" <- function(...) { render_diff(diff_data(...))}
> df.ref %~% df.changed
> 
> df.ref <- df.orig
> df     <- df.changed
> do(df.ref, df, always_show_header=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(df.ref, df, always_show_header=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1   2    3   4   5          6   7
1   ...     ... ...  ... ... ...        ... ...
2             b   2  2.5   B   B        b B  bB
3    -> c->NULL   3  3.5   C   C        c C  cC
4    ->     d->   4  4.5   D   D        d D  dD
5    ->    e->E   5  5.5   E   E        e E  eE
6    ->   f->fg   6  6.5   F   F        f F  fF
... ...     ... ...  ... ... ...        ... ...
20   ->       u  21 21.5 U->   U u U-> u U   uU
21   ->       v  22 22.5   V   V v V-> v V   vV
22   ->       w  23 23.5   W   W w W-> w W   wW
23   ->       x  24 24.5   X   X x X-> x X   xX
24   ->       y  25 25.5   Y   Y y Y-> y Y   yY
25   ->       z  26 26.5   Z   Z z Z-> z Z   zZ

> 
> 
> df.ref <- df.orig
> df     <- df.changed
> do(always_show_order=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(always_show_order=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
        0   1       2    3       4       5       6          7         8
1     @:@         0:0  1:1     2:2     3:3     4:4        5:5       6:6
2          @@ letters ints doubles factors LETTERS         lL unchanged
3         ...     ...  ...     ...     ...     ...        ...       ...
4     2:2           b    2     2.5       B       B        b B        bB
5     3:3  -> c->NULL    3     3.5       C       C        c C        cC
6     4:4  ->     d->    4     4.5       D       D        d D        dD
...   ... ...     ...  ...     ...     ...     ...        ...       ...
22  21:21  ->       u   21    21.5     U->       U u U-> u U         uU
23  22:22  ->       v   22    22.5       V       V v V-> v V         vV
24  23:23  ->       w   23    23.5       W       W w W-> w W         wW
25  24:24  ->       x   24    24.5       X       X x X-> x X         xX
26  25:25  ->       y   25    25.5       Y       Y y Y-> y Y         yY
27  26:26  ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> df.ref <- df.orig
> df <- df.changed
> do(columns_to_ignore=NULL)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(columns_to_ignore=c())
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(columns_to_ignore=c("ints", "letters"))
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0        1       2       3          4         5
1    @@  doubles factors LETTERS         lL unchanged
2   ...      ...     ...     ...        ...       ...
3           10.5       J       J        j J        jJ
4    ->     11.5       K       K  k K-> k K        kK
5    ->     12.5       L       L  l L-> l L        lL
6    -> 13.5->NA       M       M  m M-> m M        mM
... ...      ...     ...     ...        ...       ...
14   ->     21.5     U->       U u U-> u U         uU
15   ->     22.5       V       V v V-> v V         vV
16   ->     23.5       W       W w W-> w W         wW
17   ->     24.5       X       X x X-> x X         xX
18   ->     25.5       Y       Y y Y-> y Y         yY
19   ->     26.5       Z       Z z Z-> z Z         zZ

> do(columns_to_ignore=c("letters"))
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0    1        2       3       4          5         6
1    @@ ints  doubles factors LETTERS         lL unchanged
2   ...  ...      ...     ...     ...        ...       ...
3         10     10.5       J       J        j J        jJ
4    ->   11     11.5       K       K  k K-> k K        kK
5    ->   12     12.5       L       L  l L-> l L        lL
6    ->   13 13.5->NA       M       M  m M-> m M        mM
... ...  ...      ...     ...     ...        ...       ...
14   ->   21     21.5     U->       U u U-> u U         uU
15   ->   22     22.5       V       V v V-> v V         vV
16   ->   23     23.5       W       W w W-> w W         wW
17   ->   24     24.5       X       X x X-> x X         xX
18   ->   25     25.5       Y       Y y Y-> y Y         yY
19   ->   26     26.5       Z       Z z Z-> z Z         zZ

> 
> 
> df.ref <- df.orig
> df <- df.changed
> do(count_like_a_spreadsheet=NULL,  always_show_order=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
        0   1       2    3       4       5       6          7         8
1     @:@         A:A  B:B     C:C     D:D     E:E        F:F       G:G
2          @@ letters ints doubles factors LETTERS         lL unchanged
3         ...     ...  ...     ...     ...     ...        ...       ...
4     2:2           b    2     2.5       B       B        b B        bB
5     3:3  -> c->NULL    3     3.5       C       C        c C        cC
6     4:4  ->     d->    4     4.5       D       D        d D        dD
...   ... ...     ...  ...     ...     ...     ...        ...       ...
22  21:21  ->       u   21    21.5     U->       U u U-> u U         uU
23  22:22  ->       v   22    22.5       V       V v V-> v V         vV
24  23:23  ->       w   23    23.5       W       W w W-> w W         wW
25  24:24  ->       x   24    24.5       X       X x X-> x X         xX
26  25:25  ->       y   25    25.5       Y       Y y Y-> y Y         yY
27  26:26  ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(count_like_a_spreadsheet=TRUE,  always_show_order=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
        0   1       2    3       4       5       6          7         8
1     @:@         A:A  B:B     C:C     D:D     E:E        F:F       G:G
2          @@ letters ints doubles factors LETTERS         lL unchanged
3         ...     ...  ...     ...     ...     ...        ...       ...
4     2:2           b    2     2.5       B       B        b B        bB
5     3:3  -> c->NULL    3     3.5       C       C        c C        cC
6     4:4  ->     d->    4     4.5       D       D        d D        dD
...   ... ...     ...  ...     ...     ...     ...        ...       ...
22  21:21  ->       u   21    21.5     U->       U u U-> u U         uU
23  22:22  ->       v   22    22.5       V       V v V-> v V         vV
24  23:23  ->       w   23    23.5       W       W w W-> w W         wW
25  24:24  ->       x   24    24.5       X       X x X-> x X         xX
26  25:25  ->       y   25    25.5       Y       Y y Y-> y Y         yY
27  26:26  ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(count_like_a_spreadsheet=FALSE, always_show_order=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
        0   1       2    3       4       5       6          7         8
1     @:@         0:0  1:1     2:2     3:3     4:4        5:5       6:6
2          @@ letters ints doubles factors LETTERS         lL unchanged
3         ...     ...  ...     ...     ...     ...        ...       ...
4     2:2           b    2     2.5       B       B        b B        bB
5     3:3  -> c->NULL    3     3.5       C       C        c C        cC
6     4:4  ->     d->    4     4.5       D       D        d D        dD
...   ... ...     ...  ...     ...     ...     ...        ...       ...
22  21:21  ->       u   21    21.5     U->       U u U-> u U         uU
23  22:22  ->       v   22    22.5       V       V v V-> v V         vV
24  23:23  ->       w   23    23.5       W       W w W-> w W         wW
25  24:24  ->       x   24    24.5       X       X x X-> x X         xX
26  25:25  ->       y   25    25.5       Y       Y y Y-> y Y         yY
27  26:26  ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> 
> df.ref <- df.orig
> df <- df.changed
> df$unchanged <- rev(df$unchanged)
> df$ints <- sample(nrow(df), 26, replace=TRUE)
> do(ids=NULL)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1      2       3       4       5          6         7
1    @@ letters   ints doubles factors LETTERS         lL unchanged
2    ->       a  1->18     1.5       A       A        a A    aA->zZ
3    ->       b   2->1     2.5       B       B        b B    bB->yY
4    -> c->NULL  3->22     3.5       C       C        c C    cC->xX
5    ->     d->   4->1     4.5       D       D        d D    dD->wW
6    ->    e->E   5->6     5.5       E       E        e E    eE->vV
... ...     ...    ...     ...     ...     ...        ...       ...
22   ->       u     21    21.5     U->       U u U-> u U     uU->fF
23   ->       v  22->2    22.5       V       V v V-> v V     vV->eE
24   ->       w 23->20    23.5       W       W w W-> w W     wW->dD
25   ->       x 24->18    24.5       X       X x X-> x X     xX->cC
26   ->       y  25->5    25.5       Y       Y y Y-> y Y     yY->bB
27   ->       z  26->7    26.5       Z       Z z Z-> z Z     zZ->aA

> do(ids=c("ints", "letters"))
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1      2       3       4       5          6         7
1    @@ letters   ints doubles factors LETTERS         lL unchanged
2    ->       a  1->18     1.5       A       A        a A    aA->zZ
3    ->       b   2->1     2.5       B       B        b B    bB->yY
4    -> c->NULL  3->22     3.5       C       C        c C    cC->xX
5    ->     d->   4->1     4.5       D       D        d D    dD->wW
6    ->    e->E   5->6     5.5       E       E        e E    eE->vV
... ...     ...    ...     ...     ...     ...        ...       ...
22   ->       u     21    21.5     U->       U u U-> u U     uU->fF
23   ->       v  22->2    22.5       V       V v V-> v V     vV->eE
24   ->       w 23->20    23.5       W       W w W-> w W     wW->dD
25   ->       x 24->18    24.5       X       X x X-> x X     xX->cC
26   ->       y  25->5    25.5       Y       Y y Y-> y Y     yY->bB
27   ->       z  26->7    26.5       Z       Z z Z-> z Z     zZ->aA

> do(ids=c(""))
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1      2       3       4       5          6         7
1    @@ letters   ints doubles factors LETTERS         lL unchanged
2    ->       a  1->18     1.5       A       A        a A    aA->zZ
3    ->       b   2->1     2.5       B       B        b B    bB->yY
4    -> c->NULL  3->22     3.5       C       C        c C    cC->xX
5    ->     d->   4->1     4.5       D       D        d D    dD->wW
6    ->    e->E   5->6     5.5       E       E        e E    eE->vV
... ...     ...    ...     ...     ...     ...        ...       ...
22   ->       u     21    21.5     U->       U u U-> u U     uU->fF
23   ->       v  22->2    22.5       V       V v V-> v V     vV->eE
24   ->       w 23->20    23.5       W       W w W-> w W     wW->dD
25   ->       x 24->18    24.5       X       X x X-> x X     xX->cC
26   ->       y  25->5    25.5       Y       Y y Y-> y Y     yY->bB
27   ->       z  26->7    26.5       Z       Z z Z-> z Z     zZ->aA

> 
> df.ref <- df.orig
> df <- df.changed
> do()
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(ignore_whitespace=NULL)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5   6
1    @@ letters ints doubles factors LETTERS ...
2   ...     ...  ...     ...     ...     ... ...
3             b    2     2.5       B       B ...
4    -> c->NULL    3     3.5       C       C ...
5    ->     d->    4     4.5       D       D ...
6    ->    e->E    5     5.5       E       E ...
... ...     ...  ...     ...     ...     ... ...
16   ->       r   18    18.5 R->NULL       R ...
17   ->       s   19    19.5    S->Z       S ...
18   ->       t   20    20.5    T->t       T ...
19   ->       u   21    21.5     U->       U ...
20            v   22    22.5       V       V ...
21  ...     ...  ...     ...     ...     ... ...

> do(ignore_whitespace=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(ignore_whitespace=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5   6
1    @@ letters ints doubles factors LETTERS ...
2   ...     ...  ...     ...     ...     ... ...
3             b    2     2.5       B       B ...
4    -> c->NULL    3     3.5       C       C ...
5    ->     d->    4     4.5       D       D ...
6    ->    e->E    5     5.5       E       E ...
... ...     ...  ...     ...     ...     ... ...
16   ->       r   18    18.5 R->NULL       R ...
17   ->       s   19    19.5    S->Z       S ...
18   ->       t   20    20.5    T->t       T ...
19   ->       u   21    21.5     U->       U ...
20            v   22    22.5       V       V ...
21  ...     ...  ...     ...     ...     ... ...

> 
> df.ref <- df.orig
> df <- df.changed
> do()
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(never_show_order=NULL)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(never_show_order=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(never_show_order=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> tmp <- df.changed
> tmp <- tmp[sample(nrow(tmp)), ]
> do(y=tmp)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(y=tmp, ordered=NULL)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(y=tmp, ordered=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(y=tmp, ordered=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> df.ref <- df.orig
> df     <- rbind(df.ref[1:20,], df.changed[21:26,])
> do(padding_strategy="auto"  )
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             t   20    20.5       T       T        t T        tT
4    ->       u   21    21.5     U->       U u U-> u U         uU
5    ->       v   22    22.5       V       V v V-> v V         vV
6    ->       w   23    23.5       W       W w W-> w W         wW
... ...     ...  ...     ...     ...     ...        ...       ...
41   ->       u   21    21.5     U->       U u U-> u U         uU
51   ->       v   22    22.5       V       V v V-> v V         vV
61   ->       w   23    23.5       W       W w W-> w W         wW
7    ->       x   24    24.5       X       X x X-> x X         xX
8    ->       y   25    25.5       Y       Y y Y-> y Y         yY
9    ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(padding_strategy="smart" )
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             t   20    20.5       T       T        t T        tT
4    ->       u   21    21.5     U->       U u U-> u U         uU
5    ->       v   22    22.5       V       V v V-> v V         vV
6    ->       w   23    23.5       W       W w W-> w W         wW
... ...     ...  ...     ...     ...     ...        ...       ...
41   ->       u   21    21.5     U->       U u U-> u U         uU
51   ->       v   22    22.5       V       V v V-> v V         vV
61   ->       w   23    23.5       W       W w W-> w W         wW
7    ->       x   24    24.5       X       X x X-> x X         xX
8    ->       y   25    25.5       Y       Y y Y-> y Y         yY
9    ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(padding_strategy="dense" )
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             t   20    20.5       T       T        t T        tT
4    ->       u   21    21.5     U->       U u U-> u U         uU
5    ->       v   22    22.5       V       V v V-> v V         vV
6    ->       w   23    23.5       W       W w W-> w W         wW
... ...     ...  ...     ...     ...     ...        ...       ...
41   ->       u   21    21.5     U->       U u U-> u U         uU
51   ->       v   22    22.5       V       V v V-> v V         vV
61   ->       w   23    23.5       W       W w W-> w W         wW
7    ->       x   24    24.5       X       X x X-> x X         xX
8    ->       y   25    25.5       Y       Y y Y-> y Y         yY
9    ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(padding_strategy="sparse")
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             t   20    20.5       T       T        t T        tT
4    ->       u   21    21.5     U->       U u U-> u U         uU
5    ->       v   22    22.5       V       V v V-> v V         vV
6    ->       w   23    23.5       W       W w W-> w W         wW
... ...     ...  ...     ...     ...     ...        ...       ...
41   ->       u   21    21.5     U->       U u U-> u U         uU
51   ->       v   22    22.5       V       V v V-> v V         vV
61   ->       w   23    23.5       W       W w W-> w W         wW
7    ->       x   24    24.5       X       X x X-> x X         xX
8    ->       y   25    25.5       Y       Y y Y-> y Y         yY
9    ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> df.ref <- df.orig
> df     <- rbind(df.ref[1:20,], df.changed)
> do(show_unchanged=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2             a    1     1.5       A    <NA>        a A      <NA>
3             b    2     2.5       B    <NA>        b B      <NA>
4             c    3     3.5       C    <NA>        c C      <NA>
5             d    4     4.5       D    <NA>        d D      <NA>
6             e    5     5.5       E    <NA>        e E      <NA>
... ...     ...  ...     ...     ...     ...        ...       ...
42   ->       u   21    21.5     U->       U u U-> u U         uU
43   ->       v   22    22.5       V       V v V-> v V         vV
44   ->       w   23    23.5       W       W w W-> w W         wW
45   ->       x   24    24.5       X       X x X-> x X         xX
46   ->       y   25    25.5       Y       Y y Y-> y Y         yY
47   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(show_unchanged=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             t   20    20.5       T       T        t T        tT
4   +++       a    1     1.5       A       A        a A        aA
5   +++       b    2     2.5       B       B        b B        bB
6   +++    <NA>    3     3.5       C       C        c C        cC
... ...     ...  ...     ...     ...     ...        ...       ...
24   ->       u   21    21.5     U->       U u U-> u U         uU
25   ->       v   22    22.5       V       V v V-> v V         vV
26   ->       w   23    23.5       W       W w W-> w W         wW
27   ->       x   24    24.5       X       X x X-> x X         xX
28   ->       y   25    25.5       Y       Y y Y-> y Y         yY
29   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> 
> df <- df.orig
> df <- cbind(df.changed[,1:2], df.orig[, -c(1:2)])
> do(show_unchanged_columns=TRUE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5   6         7
1    @@ letters ints doubles factors LETTERS  lL unchanged
2   ...     ...  ...     ...     ...     ... ...       ...
3             b    2     2.5       B       B b B        bB
4    -> c->NULL    3     3.5       C       C c C        cC
5    ->     d->    4     4.5       D       D d D        dD
6    ->    e->E    5     5.5       E       E e E        eE
... ...     ...  ...     ...     ...     ... ...       ...
41   -> c->NULL    3     3.5       C       C c C        cC
51   ->     d->    4     4.5       D       D d D        dD
61   ->    e->E    5     5.5       E       E e E        eE
7    ->   f->fg    6     6.5       F       F f F        fF
8             g    7     7.5       G       G g G        gG
9   ...     ...  ...     ...     ...     ... ...       ...

> do(show_unchanged_columns=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3   4
1    @@ letters ints doubles ...
2   ...     ...  ...     ... ...
3             b    2     2.5 ...
4    -> c->NULL    3     3.5 ...
5    ->     d->    4     4.5 ...
6    ->    e->E    5     5.5 ...
... ...     ...  ...     ... ...
41   -> c->NULL    3     3.5 ...
51   ->     d->    4     4.5 ...
61   ->    e->E    5     5.5 ...
7    ->   f->fg    6     6.5 ...
8             g    7     7.5 ...
9   ...     ...  ...     ... ...

> 
> # Test 'meta' changes in column type
> df     <- cbind(df.changed, df.orig)
> df$letters  <- factor(df$letters)
> df$letters
 [1] a    b    <NA>      E    fg   g    h    i    j    k    l    m    n    o   
[16] p    q    r    s    t    u    v    w    x    y    z   
Levels:  a b E fg g h i j k l m n o p q r s t u v w x y z
> df$ints     <- as.character(df$ints)
> df$ints
 [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15"
[16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26"
> df$factors  <- df$factors
> 
> diff_data(as.data.frame(sapply(df.ref, class)),
+           as.data.frame(sapply(df,     class))
+           )
Daff Comparison: ‘as.data.frame(sapply(df.ref, class))’ vs. ‘as.data.frame(sapply(df, class))’ 
  First 6 and last 6 patch lines:
      0                       1
1     ! (sapply(df.ref, class))
2    @@       sapply(df, class)
3   +++                  factor
4   +++               character
5   +++                 numeric
6   +++                  factor
... ...                     ...
61  +++                  factor
7   +++               character
8   +++               character
9   +++               character
10                    character
11  ...                     ...

> 
> do(df.ref, show_unchanged_meta=TRUE)   #! doesn't seem to be working!!
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1       2    3       4   5         6
1     !     +++          ---     --- ---       ---
2    @@ letters letters ints doubles  lL unchanged
3     +       a       a    1     1.5 a A        aA
4     +       b       b    2     2.5 b B        bB
5          <NA>       c    3     3.5 c C        cC
6                     d    4     4.5 d D        dD
... ...     ...     ...  ...     ... ...       ...
23    +       u       u   21    21.5 u U        uU
24    +       v       v   22    22.5 v V        vV
25    +       w       w   23    23.5 w W        wW
26    +       x       x   24    24.5 x X        xX
27    +       y       y   25    25.5 y Y        yY
28    +       z       z   26    26.5 z Z        zZ

> do(show_unchanged_meta=FALSE)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1       2    3       4   5         6
1     !     +++          ---     --- ---       ---
2    @@ letters letters ints doubles  lL unchanged
3     +       a       a    1     1.5 a A        aA
4     +       b       b    2     2.5 b B        bB
5          <NA>       c    3     3.5 c C        cC
6                     d    4     4.5 d D        dD
... ...     ...     ...  ...     ... ...       ...
23    +       u       u   21    21.5 u U        uU
24    +       v       v   22    22.5 v V        vV
25    +       w       w   23    23.5 w W        wW
26    +       x       x   24    24.5 x X        xX
27    +       y       y   25    25.5 y Y        yY
28    +       z       z   26    26.5 z Z        zZ

> 
> 
> # Test context vars
> df.ref <- df.orig
> df     <- df.changed
> 
> do(unchanged_column_context=0)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4   5          6   7
1    @@ letters ints doubles factors ...         lL ...
2   ...     ...  ...     ...     ... ...        ... ...
3             b    2     2.5       B ...        b B ...
4    -> c->NULL    3     3.5       C ...        c C ...
5    ->     d->    4     4.5       D ...        d D ...
6    ->    e->E    5     5.5       E ...        e E ...
... ...     ...  ...     ...     ... ...        ... ...
21   ->       u   21    21.5     U-> ... u U-> u U  ...
22   ->       v   22    22.5       V ... v V-> v V  ...
23   ->       w   23    23.5       W ... w W-> w W  ...
24   ->       x   24    24.5       X ... x X-> x X  ...
25   ->       y   25    25.5       Y ... y Y-> y Y  ...
26   ->       z   26    26.5       Z ... z Z-> z Z  ...

> do(unchanged_column_context=5)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2   ...     ...  ...     ...     ...     ...        ...       ...
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
21   ->       u   21    21.5     U->       U u U-> u U         uU
22   ->       v   22    22.5       V       V v V-> v V         vV
23   ->       w   23    23.5       W       W w W-> w W         wW
24   ->       x   24    24.5       X       X x X-> x X         xX
25   ->       y   25    25.5       Y       Y y Y-> y Y         yY
26   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> do(unchanged_context=0)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2    -> c->NULL    3     3.5       C       C        c C        cC
3    ->     d->    4     4.5       D       D        d D        dD
4    ->    e->E    5     5.5       E       E        e E        eE
5    ->   f->fg    6     6.5       F       F        f F        fF
6    ->       k   11    11.5       K       K  k K-> k K        kK
... ...     ...  ...     ...     ...     ...        ...       ...
16   ->       u   21    21.5     U->       U u U-> u U         uU
17   ->       v   22    22.5       V       V v V-> v V         vV
18   ->       w   23    23.5       W       W w W-> w W         wW
19   ->       x   24    24.5       X       X x X-> x X         xX
20   ->       y   25    25.5       Y       Y y Y-> y Y         yY
21   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> do(unchanged_context=5)
Daff Comparison: ‘df.ref’ vs. ‘df’ 
  First 6 and last 6 patch lines:
      0       1    2       3       4       5          6         7
1    @@ letters ints doubles factors LETTERS         lL unchanged
2             a    1     1.5       A       A        a A        aA
3             b    2     2.5       B       B        b B        bB
4    -> c->NULL    3     3.5       C       C        c C        cC
5    ->     d->    4     4.5       D       D        d D        dD
6    ->    e->E    5     5.5       E       E        e E        eE
... ...     ...  ...     ...     ...     ...        ...       ...
22   ->       u   21    21.5     U->       U u U-> u U         uU
23   ->       v   22    22.5       V       V v V-> v V         vV
24   ->       w   23    23.5       W       W w W-> w W         wW
25   ->       x   24    24.5       X       X x X-> x X         xX
26   ->       y   25    25.5       Y       Y y Y-> y Y         yY
27   ->       z   26    26.5       Z       Z z Z-> z Z         zZ

> 
> 
> proc.time()
   user  system elapsed 
  2.710   0.102   2.895 
